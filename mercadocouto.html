<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Encarte Mercado Couto</title>

<style>
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:#ececec;
}

/* PAINEL */
#painel{
    background:#fff;
    padding:10px;
    border-bottom:4px solid #f26522;
    position:sticky;
    top:0;
    z-index:99;
}

button{
    background:#f26522;
    color:#fff;
    border:none;
    padding:10px 14px;
    margin:5px;
    font-weight:bold;
    cursor:pointer;
}

/* ENCARTE */
#encarte{
    width:900px;
    margin:20px auto;
    background:#fff;
    padding:20px;
}

/* TOPO */
.topo{
    background:#f26522;
    color:#fff;
    text-align:center;
    padding:18px;
}

.topo h1{margin:0;font-size:34px;}
.topo h2{margin:5px 0 0;font-weight:normal;}

/* GRADE CENTRALIZADA */
.grade{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:18px;
    margin-top:25px;
}

/* CARD PRODUTO */
.produto{
    width:200px;
    text-align:center;
    position:relative;
}

.produto img{
    width:100%;
    height:150px;
    object-fit:contain;
}

/* ETIQUETA PREÇO */
.preco{
    position:absolute;
    top:110px;
    left:50%;
    transform:translateX(-50%) rotate(-5deg);
    background:#ffd400;
    padding:6px 14px;
    font-size:22px;
    font-weight:bold;
    color:#c40000;
    box-shadow:2px 2px 4px rgba(0,0,0,.3);
}

.nome{
    margin-top:25px;
    font-weight:bold;
}

.desc{
    font-size:13px;
    color:#555;
}

/* RODAPÉ */
.rodape{
    margin-top:25px;
    border-top:2px solid #ccc;
    padding-top:10px;
    font-size:13px;
}
</style>
</head>

<body>

<div id="painel">
    <button onclick="addProduto()">Adicionar Produto</button>
    <button onclick="gerarImagem()">Baixar IMAGEM</button>
    <button onclick="window.print()">Baixar PDF</button>
    <div id="form"></div>
</div>

<div id="encarte">
    <div class="topo">
        <h1>MERCADO COUTO</h1>
        <h2>PROMOÇÃO RELÂMPAGO</h2>
    </div>

    <div class="grade" id="grade"></div>

    <div class="rodape">
        Ofertas válidas enquanto durarem os estoques.<br>
        Aceitamos cartões e PIX.<br><br>

        <b>Jardim Feo</b><br>
        Rua Américo Berlim, 243 – Barra<br><br>

        <b>Araras</b><br>
        Rua Acre, 484 – Em frente ao Otto de Alencar<br>
        Teresópolis – RJ
    </div>
</div>

<script>
let total = 0;

function addProduto(){
    if(total >= 12){
        alert("Máximo de 12 produtos.");
        return;
    }

    total++;

    const div = document.createElement("div");
    div.innerHTML = `
        <hr>
        Nome: <input id="nome${total}">
        Descrição: <input id="desc${total}">
        Preço: <input id="preco${total}">
        URL da imagem: <input id="img${total}">
        <button onclick="inserir(${total})">Inserir</button>
    `;
    document.getElementById("form").appendChild(div);
}

function inserir(id){
    const nome = document.getElementById("nome"+id).value;
    const desc = document.getElementById("desc"+id).value;
    const preco = document.getElementById("preco"+id).value;
    const img = document.getElementById("img"+id).value || "https://via.placeholder.com/150";

    const card = document.createElement("div");
    card.className = "produto";
    card.innerHTML = `
        <img src="${img}">
        <div class="preco">R$ ${preco}</div>
        <div class="nome">${nome}</div>
        <div class="desc">${desc}</div>
    `;

    document.getElementById("grade").appendChild(card);
}

/* EXPORTAR COMO IMAGEM */
function gerarImagem(){
    const node = document.getElementById("encarte");
    const data = new XMLSerializer().serializeToString(node);

    const svg = `
    <svg xmlns="http://www.w3.org/2000/svg" width="900" height="1200">
        <foreignObject width="100%" height="100%">
            ${data}
        </foreignObject>
    </svg>`;

    const blob = new Blob([svg], {type:"image/svg+xml;charset=utf-8"});
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = "encarte.png";
    a.click();
}
</script>

</body>
</html>

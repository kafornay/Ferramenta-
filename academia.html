<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Bravo13 Treinos ðŸ’€ðŸ”¥</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ==========================================
   ESTILO BRAVO13 â€” visual dark agressivo
========================================== */
:root {
  --vermelho: #c32b2b;
  --preto: #0b0b0b;
  --cinza: #2a2a2a;
  --verde: #00ffae;
  --claro: #f0f0f0;
  --radius: 14px;
  --sombra: 0 0 18px rgba(0,0,0,0.6);
}

body {
  background: radial-gradient(circle at top, #141414, #000);
  color: var(--claro);
  font-family: 'Segoe UI', Arial, sans-serif;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  background-image: url('logo.jpg');
  background-position: center top 40px;
  background-repeat: no-repeat;
  background-size: 160px;
}

.container {
  max-width: 440px;
  margin: 160px auto 40px;
  background: rgba(20,20,20,0.95);
  border: 1px solid var(--cinza);
  border-radius: var(--radius);
  box-shadow: var(--sombra);
  padding: 28px;
  backdrop-filter: blur(6px);
}

h2, h3 {
  text-align: center;
  color: var(--verde);
  margin-bottom: 20px;
  letter-spacing: 1px;
}

label {
  font-weight: bold;
  display: block;
  margin-top: 12px;
  color: var(--claro);
}

input[type="text"], input[type="password"], select {
  width: 100%;
  padding: 10px;
  border-radius: var(--radius);
  border: 1px solid #333;
  background: #111;
  color: var(--claro);
  font-size: 1em;
  margin-bottom: 14px;
  box-sizing: border-box;
}

button {
  width: 100%;
  background: var(--vermelho);
  color: #fff;
  border: none;
  border-radius: var(--radius);
  padding: 12px;
  font-size: 1.05em;
  cursor: pointer;
  box-shadow: 0 0 12px rgba(195,43,43,0.4);
  margin-bottom: 10px;
  transition: 0.25s;
}

button:hover {
  background: #e53935;
  transform: scale(1.03);
}

.painel {
  display: none;
}

.boas-vindas {
  text-align: center;
  font-size: 1.1em;
  color: var(--verde);
  font-weight: bold;
  margin-bottom: 18px;
  text-shadow: 0 0 8px rgba(0,255,174,0.3);
}

/* ===== Barra de progresso ===== */
#barraProgresso {
  background: #1a1a1a;
  border-radius: 8px;
  height: 28px;
  width: 100%;
  margin-bottom: 12px;
  overflow: hidden;
}

#progresso {
  background: linear-gradient(90deg, var(--verde), var(--vermelho));
  height: 100%;
  width: 0%;
  text-align: center;
  color: #000;
  font-weight: bold;
  line-height: 28px;
  transition: width .5s ease;
}

#faltouDias {
  text-align: center;
  color: #aaa;
  margin-top: 8px;
}

/* ===== Caixas de treino ===== */
.treino-box {
  background: #111;
  border: 1px solid #222;
  border-left: 4px solid var(--vermelho);
  border-radius: var(--radius);
  box-shadow: inset 0 0 10px rgba(195,43,43,0.2);
  padding: 12px;
  margin-bottom: 12px;
}

.treino-box strong {
  color: var(--verde);
  font-size: 1.05em;
}

/* ===== Mensagem de status ===== */
#statusMsg {
  text-align: center;
  margin-top: 10px;
  font-weight: bold;
}

@media (max-width:600px) {
  .container {
    margin: 120px 8px 40px;
    padding: 20px;
  }
}
</style>
</head>

<body>
  <div class="container" id="loginDiv">
    <h2>ðŸ’€ Bravo13 Treinos</h2>
    <input id="nome" placeholder="Nome do aluno"><br>
    <button onclick="registrar()">Registrar</button>
    <button onclick="login()">Entrar</button>
    <p id="senhaMsg"></p>
  </div>

  <div class="container painel" id="painelDiv">
    <div class="boas-vindas" id="boasVindas"></div>

    <div id="progressoDiv" style="display:none;">
      <h3>ðŸ”¥ Progresso da Semana ðŸ”¥</h3>
      <div id="barraProgresso">
        <div id="progresso">0%</div>
      </div>
      <p id="faltouDias"></p>
    </div>

    <form class="treino-form" onsubmit="event.preventDefault();salvarTreino();">
      <label for="dia">Dia da semana:</label>
      <select id="dia" onchange="atualizaTipoTreino();montarTreino();">
        <option value="">Selecione o dia</option>
        <option value="Segunda" disabled>Segunda</option>
        <option value="TerÃ§a" disabled>TerÃ§a</option>
        <option value="Quarta" disabled>Quarta</option>
        <option value="Quinta" disabled>Quinta</option>
        <option value="Sexta" disabled>Sexta</option>
        <option value="SÃ¡bado" disabled>SÃ¡bado (Cardio)</option>
      </select>

      <label for="tipo" id="labelTipo">Tipo de treino:</label>
      <select id="tipo" onchange="montarTreino()">
        <option value="">Selecione</option>
        <option value="Peito">Peito</option>
        <option value="Costas">Costas</option>
        <option value="Perna">Perna</option>
        <option value="Ombro">Ombro</option>
        <option value="BÃ­ceps/TrÃ­ceps">BÃ­ceps/TrÃ­ceps</option>
      </select>

      <div id="listaTreinos"></div>
      <button type="submit">ðŸ’ª Salvar Treino</button>
      <div id="statusMsg"></div>
    </form>
  </div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyUFFwmr6R1435ZH4Z3rGk3KUC-VaA_Cg64JDlAF0Z43kX-2_h5DK-KUVA96eNJaMe8HQ/exec";

// Registrar
function registrar() {
  const nome = document.getElementById("nome").value.trim();
  fetch(API_URL, { method: "POST", body: new URLSearchParams({ acao: "registrar", nome }) })
  .then(r => r.json())
  .then(d => {
    document.getElementById("senhaMsg").innerText =
      d.status === "ok" ? `âœ… Sua senha Ã©: ${d.senha}` : "Erro ao registrar.";
  });
}

// Login
function login() {
  const nome = document.getElementById("nome").value.trim();
  const senha = prompt("Digite sua senha:");
  fetch(API_URL, { method: "POST", body: new URLSearchParams({ acao: "login", nome, senha }) })
  .then(r => r.json())
  .then(d => {
    if (d.status === "ok") {
      localStorage.setItem("aluno", nome);
      document.getElementById("loginDiv").style.display = "none";
      document.getElementById("painelDiv").style.display = "block";
      document.getElementById("boasVindas").innerText = `Bem-vindo(a), ${nome}!`;
      habilitarDiaAtual();
      carregarProgresso(nome);
    } else {
      alert("Nome ou senha incorretos.");
    }
  });
}

// Habilita dia atual
function habilitarDiaAtual() {
  const dias = ["Domingo","Segunda","TerÃ§a","Quarta","Quinta","Sexta","SÃ¡bado"];
  const hoje = new Date();
  const diaSemana = dias[hoje.getDay()];
  const options = document.querySelectorAll("#dia option");
  options.forEach(opt => {
    if (opt.value && opt.value !== diaSemana) opt.disabled = true;
    else if (opt.value === diaSemana) opt.disabled = false;
  });
  atualizaTipoTreino();
}

// Oculta tipo se for sÃ¡bado
function atualizaTipoTreino() {
  const diaSelecionado = document.getElementById("dia").value;
  if (diaSelecionado === "SÃ¡bado") {
    document.getElementById("tipo").style.display = "none";
    document.getElementById("labelTipo").style.display = "none";
  } else {
    document.getElementById("tipo").style.display = "";
    document.getElementById("labelTipo").style.display = "";
  }
}

// Monta treino
function montarTreino() {
  const tipo = document.getElementById("tipo").value;
  const diaSelecionado = document.getElementById("dia").value;
  const lista = document.getElementById("listaTreinos");
  lista.innerHTML = "";

  const cardio = ["Corrida na esteira", "Bicicleta ergomÃ©trica", "ElÃ­ptico", "Pular corda", "HIIT (20min)"];
  if (diaSelecionado === "SÃ¡bado") {
    lista.innerHTML = "<h4>Treino Cardio</h4>";
    cardio.forEach(ex => {
      lista.innerHTML += `<div class="treino-box"><strong>${ex}</strong><br>
      <label>DuraÃ§Ã£o:</label>
      <select><option>10min</option><option>20min</option><option>30min</option><option>40min</option><option>60min</option></select></div>`;
    });
    return;
  }

  if (!tipo) return;
  const exercicios = {
    "Peito": ["Supino reto", "Supino inclinado", "Crucifixo", "Crossover", "FlexÃ£o"],
    "Costas": ["Puxada frente", "Remada curvada", "Remada baixa", "Puxada inversa", "Levantamento terra"],
    "Perna": ["Agachamento", "Leg press", "Cadeira extensora", "Mesa flexora", "Panturrilha"],
    "Ombro": ["Desenvolvimento", "ElevaÃ§Ã£o lateral", "ElevaÃ§Ã£o frontal", "Remada alta", "Crucifixo invertido"],
    "BÃ­ceps/TrÃ­ceps": ["Rosca direta", "Rosca martelo", "TrÃ­ceps corda", "TrÃ­ceps francÃªs", "TrÃ­ceps banco"]
  };

  exercicios[tipo].forEach(ex => {
    lista.innerHTML += `<div class="treino-box"><strong>${ex}</strong><br>
    <label>SÃ©ries:</label>
    <select><option>4s</option><option>3s</option><option>2s</option><option>1s</option></select>
    <label>RepetiÃ§Ãµes:</label>
    <select><option>12rp</option><option>10rp</option><option>8rp</option></select></div>`;
  });
}

// Salvar treino
function salvarTreino() {
  const nome = localStorage.getItem("aluno");
  const dia = document.getElementById("dia").value;
  const tipo = document.getElementById("tipo").value;
  const diasSemana = ["Domingo","Segunda","TerÃ§a","Quarta","Quinta","Sexta","SÃ¡bado"];
  const hoje = new Date();
  const diaAtual = diasSemana[hoje.getDay()];
  if (dia !== diaAtual) return alert(`SÃ³ Ã© possÃ­vel marcar treino para hoje (${diaAtual})!`);

  const boxes = document.querySelectorAll(".treino-box");
  const exercicios = [];

  if (dia === "SÃ¡bado") {
    boxes.forEach(box => {
      const nomeEx = box.querySelector("strong").innerText;
      const duracao = box.querySelector("select").value;
      exercicios.push({ nome:nomeEx, series:duracao, repeticoes:"" });
    });
  } else {
    if (!tipo) return alert("Selecione o tipo de treino!");
    boxes.forEach(box => {
      const nomeEx = box.querySelector("strong").innerText;
      const series = box.querySelectorAll("select")[0].value;
      const repeticoes = box.querySelectorAll("select")[1].value;
      exercicios.push({ nome:nomeEx, series, repeticoes });
    });
  }

  fetch(API_URL, {
    method:"POST",
    body:new URLSearchParams({
      acao:"salvarTreino",
      nome,
      dia,
      tipo,
      exercicios:JSON.stringify(exercicios)
    })
  })
  .then(r=>r.json())
  .then(d=>{
    document.getElementById("statusMsg").innerText =
      d.status==="ok" ? "âœ… Treino salvo com sucesso!" : "âŒ Erro ao salvar treino.";
    carregarProgresso(nome);
    setTimeout(()=>{document.getElementById("statusMsg").innerText=""},3000);
  })
  .catch(err=>{
    console.error(err);
    document.getElementById("statusMsg").innerText = "âŒ Falha de conexÃ£o com servidor.";
  });
}

// Barra de progresso
function carregarProgresso(nome) {
  fetch(API_URL, { method:"POST", body:new URLSearchParams({ acao:"historico", nome }) })
  .then(r=>r.json())
  .then(d=>{
    if (d.status==="ok") {
      document.getElementById("progressoDiv").style.display = "block";
      const dias = ["Segunda","TerÃ§a","Quarta","Quinta","Sexta","SÃ¡bado"];
      let feitos=0, total=dias.length, faltou=[];
      dias.forEach(dia=>{
        if (d.treinos && d.treinos[dia]) feitos++;
        else faltou.push(dia);
      });
      const percent = Math.round((feitos/total)*100);
      document.getElementById("progresso").style.width=percent+"%";
      document.getElementById("progresso").innerText=percent+"%";
      document.getElementById("faltouDias").innerText =
        faltou.length ? `VocÃª nÃ£o treinou em: ${faltou.join(", ")}` : "ðŸ”¥ ParabÃ©ns! Treinou todos os dias!";
    }
  });
}

// Autologin
window.onload=function(){
  let aluno=localStorage.getItem("aluno");
  if(aluno){
    document.getElementById("loginDiv").style.display="none";
    document.getElementById("painelDiv").style.display="block";
    document.getElementById("boasVindas").innerText=`Bem-vindo(a), ${aluno}!`;
    habilitarDiaAtual();
    carregarProgresso(aluno);
  }
};
</script>
</body>
</html>

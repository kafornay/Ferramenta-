<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üèã Academia Couto</title>
<style>
  :root {
    --vermelho: #c32b2b;
    --preto: #111;
    --cinza: #2b2b2b;
    --verde: #28a745;
  }
  body {
    margin: 0;
    font-family: "Poppins", sans-serif;
    background: var(--preto);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }
  h1 {
    margin-top: 40px;
    letter-spacing: 2px;
    color: var(--vermelho);
    text-shadow: 0 0 8px #000;
  }
  .box {
    background: var(--cinza);
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 0 10px #000;
    width: 90%;
    max-width: 400px;
    margin-top: 30px;
    transition: all 0.3s ease;
  }
  input, select, button {
    width: 90%;
    padding: 10px;
    margin: 8px 0;
    border: none;
    border-radius: 10px;
    font-size: 16px;
  }
  input, select {
    background: #1a1a1a;
    color: white;
  }
  button {
    background: var(--vermelho);
    color: white;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
  }
  button:hover {
    background: #a32323;
  }
  #painel { display: none; }
  #mensagem {
    margin-top: 15px;
    font-size: 15px;
    color: var(--verde);
  }
  footer {
    position: absolute;
    bottom: 10px;
    font-size: 12px;
    color: #777;
  }
</style>
</head>
<body>

<h1>üèã Academia Couto</h1>

<!-- LOGIN -->
<div id="loginBox" class="box">
  <h2>Login do Aluno</h2>
  <input id="nome" placeholder="Seu nome completo">
  <input id="senha" placeholder="Senha (se j√° tiver)">
  <button onclick="fazerLogin()">Entrar</button>
  <p id="mensagem"></p>
</div>

<!-- PAINEL -->
<div id="painel" class="box">
  <h3>Bem-vindo, <span id="alunoNome"></span>!</h3>
  <form id="formTreino">
    <label>Dia da semana:</label><br>
    <select id="dia" required>
      <option value="">Selecione</option>
      <option>Segunda</option>
      <option>Ter√ßa</option>
      <option>Quarta</option>
      <option>Quinta</option>
      <option>Sexta</option>
      <option>S√°bado</option>
      <option>Domingo</option>
    </select><br>

    <label>Tipo de treino:</label><br>
    <select id="tipo" required>
      <option value="">Selecione</option>
      <option>Peito</option>
      <option>Costas</option>
      <option>Perna</option>
      <option>Ombro</option>
      <option>B√≠ceps</option>
      <option>Tr√≠ceps</option>
    </select><br>

    <label>Fez o treino?</label><br>
    <select id="feito" required>
      <option value="">Selecione</option>
      <option>Sim</option>
      <option>N√£o</option>
    </select><br>

    <button type="submit">Salvar treino</button>
  </form>
  <p id="mensagemTreino"></p>
</div>

<footer>¬© 2025 Academia Couto</footer>

<script>
// üîó Cole aqui o link do seu WebApp do Google Apps Script
const scriptURL = "https://script.google.com/macros/s/AKfycbyUFFwmr6R1435ZH4Z3rGk3KUC-VaA_Cg64JDlAF0Z43kX-2_h5DK-KUVA96eNJaMe8HQ/exec";

// ----------------------------- LOGIN -----------------------------
function fazerLogin() {
  const nome = document.getElementById('nome').value.trim();
  const senha = document.getElementById('senha').value.trim();
  const msg = document.getElementById('mensagem');

  if (!nome) {
    msg.textContent = "Digite seu nome completo!";
    msg.style.color = "orange";
    return;
  }

  msg.textContent = "Verificando...";
  msg.style.color = "#aaa";

  fetch(${scriptURL}?acao=login&nome=${encodeURIComponent(nome)}&senha=${encodeURIComponent(senha)})
  .then(r => r.json())
  .then(res => {
    if (res.status === "novo") {
      msg.textContent = Senha gerada: ${res.senha} (anote!);
      msg.style.color = "#0f0";
      mostrarPainel(nome);
    } else if (res.status === "ok") {
      msg.textContent = "Login realizado com sucesso!";
      msg.style.color = "#0f0";
      mostrarPainel(nome);
    } else {
      msg.textContent = "Senha incorreta!";
      msg.style.color = "red";
    }
  })
  .catch(() => {
    msg.textContent = "Erro ao conectar com o servidor.";
    msg.style.color = "red";
  });
}

function mostrarPainel(nome) {
  document.getElementById('loginBox').style.display = 'none';
  document.getElementById('painel').style.display = 'block';
  document.getElementById('alunoNome').textContent = nome;
}

// ----------------------------- SALVAR TREINO -----------------------------
document.getElementById('formTreino').addEventListener('submit', e => {
  e.preventDefault();
  const msgTreino = document.getElementById('mensagemTreino');

  const dados = {
    acao: "salvar",
    nome: document.getElementById('alunoNome').textContent,
    dia: document.getElementById('dia').value,
    tipo: document.getElementById('tipo').value,
    feito: document.getElementById('feito').value
  };

  msgTreino.textContent = "Salvando treino...";
  msgTreino.style.color = "#aaa";

  fetch(scriptURL, {
    method: "POST",
    body: JSON.stringify(dados)
  })
  .then(r => r.text())
  .then(() => {
    msgTreino.textContent = "‚úÖ Treino salvo com sucesso!";
    msgTreino.style.color = "#0f0";
    document.getElementById('formTreino').reset();
    setTimeout(() => { msgTreino.textContent = ""; }, 3000);
  })
  .catch(() => {
    msgTreino.textContent = "Erro ao salvar treino!";
    msgTreino.style.color = "red";
  });
});
</script>

</body>
</html>
